const collectionHot = [
  [
    {
      id: 1,
      name: 'Abstract',
      total: 24,
      headerImg: [
        'image/Hot-Collection/Abstract-image-1.jpg',
        'image/Hot-Collection/Abstract-image-2.jpg',
        'image/Hot-Collection/Abstract-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Abstract-image-4.jpg',
    },
    {
      id: 1,
      name: 'Game',
      total: 27,
      headerImg: [
        'image/Hot-Collection/Game-image-1.jpg',
        'image/Hot-Collection/Game-image-2.jpg',
        'image/Hot-Collection/Game-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Game-image-4.jpg',
    },
    {
      id: 1,
      name: '3D',
      total: 13,
      headerImg: [
        'image/Hot-Collection/3D-image-1.jpg',
        'image/Hot-Collection/3D-image-2.jpg',
        'image/Hot-Collection/3D-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/3D-image-4.jpg',
    },
    {
      id: 1,
      name: 'Modern Art',
      total: 8,
      headerImg: [
        'image/Hot-Collection/Modern-image-1.jpg',
        'image/Hot-Collection/Modern-image-2.jpg',
        'image/Hot-Collection/Modern-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Modern-image-4.jpg',
    },
    {
      id: 1,
      name: 'Watercolor',
      total: 4,
      headerImg: [
        'image/Hot-Collection/Watercolor-image-1.jpg',
        'image/Hot-Collection/Watercolor-image-2.jpg',
        'image/Hot-Collection/Watercolor-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Watercolor-image-4.jpg',
    },
    {
      id: 1,
      name: 'Graffiti',
      total: 10,
      headerImg: [
        'image/Hot-Collection/Graffiti-image-1.jpg',
        'image/Hot-Collection/Graffiti-image-2.jpg',
        'image/Hot-Collection/Graffiti-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Graffiti-image-4.jpg',
    },
  ],
  [
    {
      id: 1,
      name: 'Abstract',
      total: 24,
      headerImg: [
        'image/Hot-Collection/Abstract-image-1.jpg',
        'image/Hot-Collection/Abstract-image-2.jpg',
        'image/Hot-Collection/Abstract-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Abstract-image-4.jpg',
    },
    {
      id: 1,
      name: 'Game',
      total: 27,
      headerImg: [
        'image/Hot-Collection/Game-image-1.jpg',
        'image/Hot-Collection/Game-image-2.jpg',
        'image/Hot-Collection/Game-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Game-image-4.jpg',
    },
    {
      id: 1,
      name: '3D',
      total: 13,
      headerImg: [
        'image/Hot-Collection/3D-image-1.jpg',
        'image/Hot-Collection/3D-image-2.jpg',
        'image/Hot-Collection/3D-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/3D-image-4.jpg',
    },
    {
      id: 1,
      name: 'Modern Art',
      total: 8,
      headerImg: [
        'image/Hot-Collection/Modern-image-1.jpg',
        'image/Hot-Collection/Modern-image-2.jpg',
        'image/Hot-Collection/Modern-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Modern-image-4.jpg',
    },
    {
      id: 1,
      name: 'Watercolor',
      total: 4,
      headerImg: [
        'image/Hot-Collection/Watercolor-image-1.jpg',
        'image/Hot-Collection/Watercolor-image-2.jpg',
        'image/Hot-Collection/Watercolor-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Watercolor-image-4.jpg',
    },
    {
      id: 1,
      name: 'Graffiti',
      total: 10,
      headerImg: [
        'image/Hot-Collection/Graffiti-image-1.jpg',
        'image/Hot-Collection/Graffiti-image-2.jpg',
        'image/Hot-Collection/Graffiti-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Graffiti-image-4.jpg',
    },
  ],
  [
    {
      id: 1,
      name: 'Abstract',
      total: 24,
      headerImg: [
        'image/Hot-Collection/Abstract-image-1.jpg',
        'image/Hot-Collection/Abstract-image-2.jpg',
        'image/Hot-Collection/Abstract-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Abstract-image-4.jpg',
    },
    {
      id: 1,
      name: 'Game',
      total: 27,
      headerImg: [
        'image/Hot-Collection/Game-image-1.jpg',
        'image/Hot-Collection/Game-image-2.jpg',
        'image/Hot-Collection/Game-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Game-image-4.jpg',
    },
    {
      id: 1,
      name: '3D',
      total: 13,
      headerImg: [
        'image/Hot-Collection/3D-image-1.jpg',
        'image/Hot-Collection/3D-image-2.jpg',
        'image/Hot-Collection/3D-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/3D-image-4.jpg',
    },
    {
      id: 1,
      name: 'Modern Art',
      total: 8,
      headerImg: [
        'image/Hot-Collection/Modern-image-1.jpg',
        'image/Hot-Collection/Modern-image-2.jpg',
        'image/Hot-Collection/Modern-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Modern-image-4.jpg',
    },
    {
      id: 1,
      name: 'Watercolor',
      total: 4,
      headerImg: [
        'image/Hot-Collection/Watercolor-image-1.jpg',
        'image/Hot-Collection/Watercolor-image-2.jpg',
        'image/Hot-Collection/Watercolor-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Watercolor-image-4.jpg',
    },
    {
      id: 1,
      name: 'Graffiti',
      total: 10,
      headerImg: [
        'image/Hot-Collection/Graffiti-image-1.jpg',
        'image/Hot-Collection/Graffiti-image-2.jpg',
        'image/Hot-Collection/Graffiti-image-3.jpg',
      ],
      middleImg: 'image/Hot-Collection/Graffiti-image-4.jpg',
    },
  ],
];

class AnimatedCollection {
  constructor() {
    this.initialKeyframes = [
      { opacity: 0, transform: 'translateY(50px)' },
      { opacity: 1, transform: 'translateY(0)' },
    ];
  }

  renderCollection(num, side, htmlCreate, collection, containerCollection) {
    const collectionContainer = containerCollection;
    if (!collectionContainer) return;

    const animateElements = (elements, keyframes, options) => {
      elements.forEach((element, index) => {
        const animationOptions = {
          duration: 400,
          easing: 'ease-in-out',
          fill: 'forwards',
          ...options,
          delay: index * (options.delay || 30),
        };

        const animation = element.animate(keyframes, animationOptions);

        if (options.onFinish) {
          animation.onfinish = () => options.onFinish(element);
        }
      });
    };

    if (collectionContainer.children.length > 0) {
      const elements = Array.from(collectionContainer.children);
      const exitKeyframes = [
        { opacity: 1, transform: 'translateX(0)' },
        {
          opacity: 0,
          transform: side === 'right' ? 'translateX(-100%)' : 'translateX(100%)',
        },
      ];

      animateElements(elements, exitKeyframes, {
        onFinish: (element) => {
          if (element === elements[elements.length - 1]) {
            this.renderNewItems(
              collectionContainer,
              num,
              collection,
              htmlCreate,
              side,
              animateElements,
            );
          }
        },
      });
    } else {
      const html =
        num !== null
          ? collection[num].map(htmlCreate).join('')
          : collection.map(htmlCreate).join('');
      collectionContainer.insertAdjacentHTML('beforeend', html);

      const elements = Array.from(collectionContainer.children);
      elements.forEach((element) => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(50px)';
      });

      animateElements(elements, this.initialKeyframes, {
        delay: 50,
        onFinish: (element) => {
          element.style.opacity = '1';
          element.style.transform = 'translateY(0)';
        },
      });
    }
  }

  renderNewItems(collectionContainer, num, collection, htmlCreate, side, animateElements) {
    collectionContainer.innerHTML = '';

    const html =
      num !== null ? collection[num].map(htmlCreate).join('') : collection.map(htmlCreate).join('');
    collectionContainer.insertAdjacentHTML('beforeend', html);

    const newElements = Array.from(collectionContainer.children);

    newElements.forEach((element) => {
      element.style.opacity = '0';
      element.style.transform = side === 'right' ? 'translateX(100%)' : 'translateX(-100%)';
    });

    const enterKeyframes = [
      {
        opacity: 0,
        transform: side === 'right' ? 'translateX(100%)' : 'translateX(-100%)',
      },
      { opacity: 1, transform: 'translateX(0)' },
    ];

    animateElements(newElements, enterKeyframes, {
      onFinish: (element) => {
        element.style.opacity = '1';
        element.style.transform = 'translateX(0)';
      },
    });
  }
}

class HotCollectionManager extends AnimatedCollection {
  constructor(collectionContainer, buttonsContainer, titleElement) {
    super();
    this.collectionContainer = collectionContainer;
    this.buttonsContainer = buttonsContainer;
    this.titleElement = titleElement;
    this.collectionIndex = 0;
    this.collectionData = collectionHot;

    this.init();
  }

  init() {
    this.renderButtons();
    this.renderCurrentCollection();
    this.setupEventListeners();
  }

  renderButtons() {
    if (!this.buttonsContainer) return;

    const fragment = document.createDocumentFragment();

    for (let i = 0; i < this.collectionData.length; i++) {
      const input = document.createElement('input');
      input.type = 'radio';
      input.id = `tab-${i}`;
      input.name = 'slider';
      if (i === 0) input.checked = true;

      const label = document.createElement('label');
      label.htmlFor = `tab-${i}`;
      label.className = 'radio-button';

      fragment.appendChild(input);
      fragment.appendChild(label);
    }

    this.buttonsContainer.appendChild(fragment);
  }

  renderCurrentCollection(targetId = 0, side = '') {
    this.renderCollection(
      targetId,
      side,
      this.createItemInCollection,
      this.collectionData,
      this.collectionContainer,
    );
  }

  createItemInCollection(item) {
    return `
      <li class="table-collection__item item-collection">
        <div class="item-collection__header">
          <div><img src="${item.headerImg[0]}" alt="${item.name}" /></div>
          <div><img src="${item.headerImg[1]}" alt="${item.name}" /></div>
          <div><img src="${item.headerImg[2]}" alt="${item.name}" /></div>
        </div>
        <div class="item-collection__middle">
          <img src="${item.middleImg}" alt="${item.name}" />
        </div>
        <div class="item-collection__footer">
          <h4 class="item-collection__title">${item.name}</h4>
          <p class="item-collection__total">${item.total} items</p>
        </div>
      </li>
    `;
  }

  setupEventListeners() {
    if (!this.buttonsContainer) return;

    this.buttonsContainer.addEventListener('change', (event) => {
      const targetId = +event.target.id.slice(-1);
      const side =
        this.collectionIndex < targetId ? 'right' : this.collectionIndex > targetId ? 'left' : '';
      this.collectionIndex = targetId;
      this.renderCurrentCollection(targetId, side);
    });

    this.buttonsContainer.addEventListener('click', (event) => {
      if (event.target.closest('label')) {
        this.titleElement.scrollIntoView();
      }
    });
  }
}

export { HotCollectionManager, AnimatedCollection };

//
//
//
//
// export function renderButtons(buttonsContainer) {
//   const containerButtons = buttonsContainer;
//   if (!containerButtons) return;
//
//   const fragment = document.createDocumentFragment();
//
//   for (let i = 0; i < collectionHot.length; i++) {
//     const input = document.createElement('input');
//     input.type = 'radio';
//     input.id = `tab-${i}`;
//     input.name = 'slider';
//     if (i === 0) input.checked = true;
//
//     const label = document.createElement('label');
//     label.htmlFor = `tab-${i}`;
//     label.className = 'radio-button';
//
//     fragment.appendChild(input);
//     fragment.appendChild(label);
//   }
//
//   containerButtons.appendChild(fragment);
// }
//
// export const createItemInCollection = (item) => `
// <li class="table-collection__item item-collection">
//   <div class="item-collection__header">
//     <div><img src="${item.headerImg[0]}" alt="${item.name}" /></div>
//     <div><img src="${item.headerImg[1]}" alt="${item.name}" /></div>
//     <div><img src="${item.headerImg[2]}" alt="${item.name}" /></div>
//   </div>
//   <div class="item-collection__middle">
//     <img src="${item.middleImg}" alt="${item.name}" />
//   </div>
//   <div class="item-collection__footer">
//     <h4 class="item-collection__title">${item.name}</h4>
//     <p class="item-collection__total">${item.total} items</p>
//   </div>
// </li>
// `;
//
// export function renderCollection(num, side, htmlCreate, collection, containerCollection) {
//   const collectionContainer = containerCollection;
//   if (!collectionContainer) return;
//
//   const animateElements = (elements, keyframes, options) => {
//     elements.forEach((element, index) => {
//       const animationOptions = {
//         duration: 400,
//         easing: 'ease-in-out',
//         fill: 'forwards',
//         ...options,
//         delay: index * (options.delay || 30),
//       };
//
//       const animation = element.animate(keyframes, animationOptions);
//
//       if (options.onFinish) {
//         animation.onfinish = () => options.onFinish(element);
//       }
//     });
//   };
//
//   if (collectionContainer.children.length > 0) {
//     const elements = Array.from(collectionContainer.children);
//     const exitKeyframes = [
//       { opacity: 1, transform: 'translateX(0)' },
//       {
//         opacity: 0,
//         transform: side === 'right' ? 'translateX(-100%)' : 'translateX(100%)',
//       },
//     ];
//
//     animateElements(elements, exitKeyframes, {
//       onFinish: (element) => {
//         if (element === elements[elements.length - 1]) {
//           renderNewItems();
//         }
//       },
//     });
//
//     const renderNewItems = () => {
//       collectionContainer.innerHTML = '';
//
//       const html =
//         num !== null
//           ? collection[num].map(htmlCreate).join('')
//           : collection.map(htmlCreate).join('');
//       collectionContainer.insertAdjacentHTML('beforeend', html);
//
//       const newElements = Array.from(collectionContainer.children);
//
//       newElements.forEach((element) => {
//         element.style.opacity = '0';
//         element.style.transform = side === 'right' ? 'translateX(100%)' : 'translateX(-100%)';
//       });
//
//       const enterKeyframes = [
//         {
//           opacity: 0,
//           transform: side === 'right' ? 'translateX(100%)' : 'translateX(-100%)',
//         },
//         { opacity: 1, transform: 'translateX(0)' },
//       ];
//
//       animateElements(newElements, enterKeyframes, {
//         onFinish: (element) => {
//           element.style.opacity = '1';
//           element.style.transform = 'translateX(0)';
//         },
//       });
//     };
//   } else {
//     const html =
//       num !== null ? collection[num].map(htmlCreate).join('') : collection.map(htmlCreate).join('');
//     collectionContainer.insertAdjacentHTML('beforeend', html);
//
//     const elements = Array.from(collectionContainer.children);
//     elements.forEach((element) => {
//       element.style.opacity = '0';
//       element.style.transform = 'translateY(50px)';
//     });
//
//     const initialKeyframes = [
//       { opacity: 0, transform: 'translateY(50px)' },
//       { opacity: 1, transform: 'translateY(0)' },
//     ];
//
//     animateElements(elements, initialKeyframes, {
//       delay: 50,
//       onFinish: (element) => {
//         element.style.opacity = '1';
//         element.style.transform = 'translateY(0)';
//       },
//     });
//   }
// }
